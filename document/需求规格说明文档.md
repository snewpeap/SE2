# 影院管理系统需求规格说明文档

## 修改记录

| 修改人员 |日期| 修改原因| 版本号 |
| :-: | :-: | - | :-: |
|赖宝光、杨日东、魏进、徐凌云|2019/5/24|第二第三阶段需求说明填空|v3.0 alpha|
|杨日东|2019/6/16|整理补充|v3.0 beta|

## 目录

- [影院管理系统需求规格说明文档](#%E5%BD%B1%E9%99%A2%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%9C%80%E6%B1%82%E8%A7%84%E6%A0%BC%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3)
  - [修改记录](#%E4%BF%AE%E6%94%B9%E8%AE%B0%E5%BD%95)
  - [目录](#%E7%9B%AE%E5%BD%95)
  - [1. 引言](#1-%E5%BC%95%E8%A8%80)
    - [1.1 目的](#11-%E7%9B%AE%E7%9A%84)
    - [1.2 范围](#12-%E8%8C%83%E5%9B%B4)
    - [1.3 参考文献](#13-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE)
  - [2. 总体描述](#2-%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0)
    - [2.1 项目前景](#21-%E9%A1%B9%E7%9B%AE%E5%89%8D%E6%99%AF)
      - [2.1.1 背景与机遇](#211-%E8%83%8C%E6%99%AF%E4%B8%8E%E6%9C%BA%E9%81%87)
      - [2.1.2 业务需求](#212-%E4%B8%9A%E5%8A%A1%E9%9C%80%E6%B1%82)
    - [2.2 项目功能](#22-%E9%A1%B9%E7%9B%AE%E5%8A%9F%E8%83%BD)
    - [2.3 用户特征](#23-%E7%94%A8%E6%88%B7%E7%89%B9%E5%BE%81)
    - [2.4 约束](#24-%E7%BA%A6%E6%9D%9F)
    - [2.5 假设与依赖](#25-%E5%81%87%E8%AE%BE%E4%B8%8E%E4%BE%9D%E8%B5%96)
  - [3 详细需求描述](#3-%E8%AF%A6%E7%BB%86%E9%9C%80%E6%B1%82%E6%8F%8F%E8%BF%B0)
    - [3.1 对外接口需求](#31-%E5%AF%B9%E5%A4%96%E6%8E%A5%E5%8F%A3%E9%9C%80%E6%B1%82)
      - [3.1.1 用户界面](#311-%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2)
      - [3.1.2 通信接口](#312-%E9%80%9A%E4%BF%A1%E6%8E%A5%E5%8F%A3)
    - [3.2 功能需求](#32-%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.1 管理电影](#321-%E7%AE%A1%E7%90%86%E7%94%B5%E5%BD%B1)
        - [3.2.1.1 特征描述](#3211-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.1.2 刺激/响应序列](#3212-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.1.3 相关功能需求](#3213-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.2 查看电影想看人数](#322-%E6%9F%A5%E7%9C%8B%E7%94%B5%E5%BD%B1%E6%83%B3%E7%9C%8B%E4%BA%BA%E6%95%B0)
        - [3.2.2.1 特征描述](#3221-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.2.2 刺激/响应序列](#3222-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.2.3 相关功能需求](#3223-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.3 搜索电影](#323-%E6%90%9C%E7%B4%A2%E7%94%B5%E5%BD%B1)
        - [3.2.3.1 特征描述](#3231-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.3.2 刺激/响应序列](#3232-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.3.3 相关功能需求](#3233-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.4 查看电影详情](#324-%E6%9F%A5%E7%9C%8B%E7%94%B5%E5%BD%B1%E8%AF%A6%E6%83%85)
        - [3.2.4.1 特性描述](#3241-%E7%89%B9%E6%80%A7%E6%8F%8F%E8%BF%B0)
        - [3.2.4.2 刺激/响应序列](#3242-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.4.3 相关功能需求](#3243-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.5 标记想看电影](#325-%E6%A0%87%E8%AE%B0%E6%83%B3%E7%9C%8B%E7%94%B5%E5%BD%B1)
        - [3.2.5.1 特性描述](#3251-%E7%89%B9%E6%80%A7%E6%8F%8F%E8%BF%B0)
        - [3.2.5.2 刺激/响应序列](#3252-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.5.3 相关功能需求](#3253-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.6 用户注册](#326-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C)
        - [3.2.6.1 特征描述](#3261-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.6.2 刺激/响应序列](#3262-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.6.3 相关功能需求](#3263-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.7 用户登录](#327-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95)
        - [3.2.7.1 特征描述](#3271-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.7.2 刺激/响应序列](#3272-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.7.3 相关功能需求](#3273-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.8 用户登出](#328-%E7%94%A8%E6%88%B7%E7%99%BB%E5%87%BA)
        - [3.2.8.1 特征描述](#3281-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.8.2 刺激/响应序列](#3282-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.8.3 相关功能需求](#3283-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.9 管理排片](#329-%E7%AE%A1%E7%90%86%E6%8E%92%E7%89%87)
        - [3.2.9.1 特征描述](#3291-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.9.2 刺激/响应序列](#3292-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.9.3 相关功能需求](#3293-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.10 查看排片信息](#3210-%E6%9F%A5%E7%9C%8B%E6%8E%92%E7%89%87%E4%BF%A1%E6%81%AF)
        - [3.2.10.1 特征描述](#32101-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.10.2 刺激/响应序列](#32102-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.10.3 相关功能需求](#32103-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.11 排片信息观众可见时间统一管理](#3211-%E6%8E%92%E7%89%87%E4%BF%A1%E6%81%AF%E8%A7%82%E4%BC%97%E5%8F%AF%E8%A7%81%E6%97%B6%E9%97%B4%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86)
        - [3.2.11.1 特征描述](#32111-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.11.2 刺激/响应序列](#32112-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.11.3 相关功能需求](#32113-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.12 查看统计数据](#3212-%E6%9F%A5%E7%9C%8B%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE)
        - [3.2.12.1 特征描述](#32121-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.12.2 刺激/响应序列](#32122-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.12.3 相关功能需求](#32123-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.13 优惠活动管理](#3213-%E4%BC%98%E6%83%A0%E6%B4%BB%E5%8A%A8%E7%AE%A1%E7%90%86)
        - [3.2.13.1 特征描述](#32131-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.13.2 刺激/响应序列](#32132-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.13.3 相关功能需求](#32133-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.14 购买电影票](#3214-%E8%B4%AD%E4%B9%B0%E7%94%B5%E5%BD%B1%E7%A5%A8)
        - [3.2.14.1 特征描述](#32141-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.14.2 刺激/响应序列](#32142-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.14.3 相关功能需求](#32143-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.15 退票](#3215-%E9%80%80%E7%A5%A8)
        - [3.2.15.1 特征描述](#32151-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.15.2 刺激/响应序列](#32152-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.15.3 相关功能需求](#32153-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.16 购买会员卡](#3216-%E8%B4%AD%E4%B9%B0%E4%BC%9A%E5%91%98%E5%8D%A1)
        - [3.2.16.1 特征描述](#32161-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.16.2 刺激/响应序列](#32162-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.16.3 相关功能需求](#32163-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.17 充值会员卡](#3217-%E5%85%85%E5%80%BC%E4%BC%9A%E5%91%98%E5%8D%A1)
        - [3.2.17.1 特征描述](#32171-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.17.2 刺激/响应序列](#32172-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.17.3 相关功能需求](#32173-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.18 查看会员卡](#3218-%E6%9F%A5%E7%9C%8B%E4%BC%9A%E5%91%98%E5%8D%A1)
        - [3.2.18.1 特征描述](#32181-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.18.2 刺激/响应序列](#32182-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.18.3 相关功能需求](#32183-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.19 查看电影票](#3219-%E6%9F%A5%E7%9C%8B%E7%94%B5%E5%BD%B1%E7%A5%A8)
        - [3.2.19.1 特征描述](#32191-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.19.2 刺激/响应序列](#32192-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.19.3 相关功能需求](#32193-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.20 会员卡充值策略管理](#3220-%E4%BC%9A%E5%91%98%E5%8D%A1%E5%85%85%E5%80%BC%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86)
        - [3.2.20.1 特征描述](#32201-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.20.2 刺激/响应序列](#32202-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.20.3 相关功能需求](#32203-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.21 退票策略管理](#3221-%E9%80%80%E7%A5%A8%E7%AD%96%E7%95%A5%E7%AE%A1%E7%90%86)
        - [3.2.21.1 特征描述](#32211-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.21.2 刺激/响应序列](#32212-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.21.3 相关功能需求](#32213-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.22 影厅信息管理](#3222-%E5%BD%B1%E5%8E%85%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86)
        - [3.2.22.1 特征描述](#32221-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.22.2 刺激/响应序列](#32222-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.22.3 相关功能需求](#32223-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.23 调整用户](#3223-%E8%B0%83%E6%95%B4%E7%94%A8%E6%88%B7)
        - [3.2.23.1 特征描述](#32231-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.23.2 刺激/响应序列](#32232-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.23.3 相关功能需求](#32233-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.24 查看会员卡流水记录](#3224-%E6%9F%A5%E7%9C%8B%E4%BC%9A%E5%91%98%E5%8D%A1%E6%B5%81%E6%B0%B4%E8%AE%B0%E5%BD%95)
        - [3.2.24.1 特征描述](#32241-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.24.2 刺激/响应序列](#32242-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.24.3 相关功能需求](#32243-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.25 查看历史消费记录](#3225-%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E6%B6%88%E8%B4%B9%E8%AE%B0%E5%BD%95)
        - [3.2.25.1 特征描述](#32251-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.25.2 刺激/响应序列](#32252-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.25.3 相关功能需求](#32253-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.2.26 赠送优惠券给会员](#3226-%E8%B5%A0%E9%80%81%E4%BC%98%E6%83%A0%E5%88%B8%E7%BB%99%E4%BC%9A%E5%91%98)
        - [3.2.26.1 特征描述](#32261-%E7%89%B9%E5%BE%81%E6%8F%8F%E8%BF%B0)
        - [3.2.26.2 刺激/响应序列](#32262-%E5%88%BA%E6%BF%80%E5%93%8D%E5%BA%94%E5%BA%8F%E5%88%97)
        - [3.2.26.3 相关功能需求](#32263-%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
    - [3.3 非功能需求](#33-%E9%9D%9E%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82)
      - [3.3.1 安全性](#331-%E5%AE%89%E5%85%A8%E6%80%A7)
      - [3.3.2 可维护性](#332-%E5%8F%AF%E7%BB%B4%E6%8A%A4%E6%80%A7)
      - [3.3.3 易用性](#333-%E6%98%93%E7%94%A8%E6%80%A7)
      - [3.3.4 可靠性](#334-%E5%8F%AF%E9%9D%A0%E6%80%A7)
      - [3.3.5 业务规则](#335-%E4%B8%9A%E5%8A%A1%E8%A7%84%E5%88%99)
      - [3.3.6 约束](#336-%E7%BA%A6%E6%9D%9F)
    - [3.4 数据需求](#34-%E6%95%B0%E6%8D%AE%E9%9C%80%E6%B1%82)
      - [3.4.1 数据定义](#341-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89)
      - [3.4.2 默认数据](#342-%E9%BB%98%E8%AE%A4%E6%95%B0%E6%8D%AE)
      - [3.4.3 数据格式要求](#343-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E8%A6%81%E6%B1%82)
    - [3.5 其他需求](#35-%E5%85%B6%E4%BB%96%E9%9C%80%E6%B1%82)

## 1. 引言

### 1.1 目的

本文档描述了影院管理系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

### 1.2 范围

影院管理系统是为影院开发的业务系统，开发的目标是帮助该影院处理日常的重点业务和方便观众了解影院上映电影的情况，包括上架电影、统计电影想看人数，以及搜索电影、查看电影详情和标记想看电影。
通过该系统的应用，期望为队名不能为空影院提高售票效率、合理排片、吸引更多观众、帮助影院获得更多利润。

### 1.3 参考文献

1）IEEE标准
2）用例文档

## 2. 总体描述

### 2.1 项目前景

#### 2.1.1 背景与机遇

队名不能为空影院是一家新兴影院，原本仅支持线下购票，这种购票过程缓慢，总是会积压一大堆观众排队。而且影院电子屏空间有限，只能显示电影的场次信息，没有电影简介意味着无法吸引更多的观众。随着发展速度的停滞和互联网技术的发展，影院老板决定采用线上购票的方式加快购票的复杂度和速度，网页推出电影简介来吸引观众，同时便于统计电影的期望度来合理管理排片。
影院管理系统就是为满足队名不能为空影院新的快速发展要求而开发的，它包括一个数据集中服务器和很多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成任务，客户端与集中服务器采用实时通信的方式完成数据交换。

#### 2.1.2 业务需求

BR1：在系统使用1个月后，影院排长队买票现象减少80%
BR2：在系统使用3个月后，影院销售额度提高20%
最好情况：30%
最可能情况：20%
最坏情况：10%

### 2.2 项目功能

SF1：预估电影的火爆程度，辅助影院排片。
SF2：给观众提供更多电影相关信息。
SF3：方便观众检索电影。

### 2.3 用户特征

|||
| -| -|
| 影院经理（管理员） | 影院有2~3个影院经理。当新电影需要上架时，他们需要上架该电影。<br>每周至少要进行一两次对预售电影想看人数的统计。<br>影院经理的计算机操作技能较好|
|影院员工（售票员）||
|观众|影院系统的主要使用者，人数可扩展，上限十万人。<br>他们需要使用系统进行查看或搜索电影，并且有可能对感兴趣的电影进行想看标记。<br>观众的基数较大，系统的使用应尽可能的变得简单|

### 2.4 约束

CON1：系统使用web界面，而非图形界面。
CON2：系统将运行在完整支持HTML5、CSS3及Javascript的浏览器上，不对IE8及之前的浏览器进行兼容。
CON3：项目要使用持续集成方法进行开发。
CON4：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。

### 2.5 假设与依赖

无

## 3 详细需求描述

### 3.1 对外接口需求

#### 3.1.1 用户界面

UI1：观众界面
UI1.1：观众登陆进入系统后显示出已上架的电影（显示电影名称，海报，上映日期及想看人数）。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/home.jpg)

UI1.2：观众搜索电影后显示搜索结果，显示出电影名称。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/searchMovie.jpg)

&emsp;UI1.2.1：如果没有匹配的搜索结果，显示“未搜索到对应结果...”的信息。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/searchFailure.jpg)

UI1.3：电影的详情和排片页面，页面里包含电影名称，电影状态，海报，简介，上映日期，类型，地区，语言，导演，编剧，主演以及想看按钮，包含排片的开始时间，结束时间，影厅，票价和前往选座的按钮。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/movieDetail.jpg)

UI1.4：购票相关页面
&emsp;UI1.4.1：选座页面，页面里包含座位分布图和座位的可选情况。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/seatMap.jpg)

&emsp;UI1.4.2：支付页面，页面里包含订单信息、可使用的优惠券列表和支付方式选择框。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/order.jpg)

UI1.5：我的电影票界面，显示电影票列表，包含电影名称，影厅名称，座位，放映时间，结束时间，电影票状态和退票状态。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/ticket.jpg)

UI1.6：消费记录页面，显示消费记录列表，包含电影名称，电影时间，电影票信息，订单金额，实付金额和购票时间

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/perchaseRecord.jpg)

UI1.7：会员卡相关页面
&emsp;UI1.7.1：卡包页面，显示会员卡的卡号、余额、充值优惠和已拥有的优惠券，若观众没有会员卡显示购卡页面。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/cardPocketVip.jpg)

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/cardPocket.jpg)

&emsp;UI1.7.2：会员卡充值页面，包含一个填入充值金额的输入框，银行卡号和密码。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/recharge.jpg)

&emsp;UI1.7.3：会员卡流水记录页面，显示会员卡流水记录列表，包含流水记录发生时间、金额和项目名

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/rechargeRecord.jpg)

UI2：影院经理界面，影院经理进入管理系统后显示首页（首页包含已上架的电影列表）
UI2.1：统计界面，显示一个卡片列表，包含所有电影，卡片内容为电影图片、电影名称、简介、类型、导演、主演及其想看人数。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/adminHome.jpg)

&emsp;UI2.1.1：一部电影的统计界面，显示电影的所有信息、该电影想看人数及其变化趋势折线图，折线图横轴为时间，纵轴为人数

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/adminMovieDetail.jpg)

UI2.2：电影管理页面
&emsp;UI2.2.1：上架电影的页面，页面里显示一系列输入框，包含上架电影所需要填的电影名称，上映日期，海报，简介，类型，片长，地区，语言，导演，主演和编剧以及提交、取消、重置按钮

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/adminAddMovie.jpg)

UI2.3：排片管理页面
&emsp;UI2.3.1：添加或修改排片的页面，页面里显示一系列输入框，包含添加或修改排片所需要填的电影、影厅、场次票价、排片起止时和可见日期填项

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/arrangementManage.jpg)

UI2.4：优惠活动管理页面
&emsp;UI2.4.1：添加优惠活动的页面，页面里显示一系列输入框，包含添加优惠活动所需的活动名称、描述、参与金额、优惠金额、参与条件、起止日期和优惠券有效期填项。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/activityManage.jpg)

UI2.5：影厅管理页面
&emsp;UI2.5.1：添加或修改影厅的页面，页面里显示影厅座位图和一系列输入框，包含添加或修改影厅所需要的影厅名称、大小、行列数和放映能力。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/hallManage.jpg)

UI2.6：充值优惠管理页面
&emsp;UI2.6.1：添加或修改充值优惠的页面，页面里显示一系列输入框，包含添加或修改充值优惠所需要的目标金额和优惠金额。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/rechargeStrategy.jpg)

UI2.7：退票策略管理页面
&emsp;UI2.7.1：添加或修改退票策略的页面，页面里显示一系列输入框，包含添加或修改退票策略所需要的退票剩余日期，可退票性和退票额度的填项。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/refundStrategy.jpg)

UI2.8：员工管理页面
&emsp;UI2.8.1：添加或修改员工账户的页面，页面里显示一系列输入框，包含添加或修改员工账户所需要的员工账号用户名、密码和角色填项。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/staffManage.jpg)

UI2.9：赠送优惠券界面，页面里显示VIP用户列表选框、要赠送优惠券的优惠活动列表选框和赠送按钮。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/handOutCoupon.jpg)

UI3：注册界面
UI3.1：观众进入注册界面后显示出一个列表，包括用户名，密码，二次密码，提交选项，其中用户属性显示为观众（参照默认数据Default2）。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/register.jpg)

UI4：登录界面
UI4.1：用户进入系统显示出的第一个页面，包含一个列表，列表里有用户名，密码选项。列表下有“登录”按键及“还没有账号，先注册”按键。

![](http://gitlab.yangshan.tech/TeamNameCannotBeEmpty/56ad49b2305d4c37be0e1330c8139fef/raw/master/pictures/login.jpg)

#### 3.1.2 通信接口

CI1：客户端和服务器使用RPC的方式，通过http协议进行通信。

### 3.2 功能需求

#### 3.2.1 管理电影

##### 3.2.1.1 特征描述

影院经理和影院员工需要对电影进行上架，修改，下架操作。
优先级 = 高

##### 3.2.1.2 刺激/响应序列

--上架--
刺激：经理输入影片信息
响应：系统检查信息是否符合名称及格式的规范，并提示经理
刺激：经理确认上架电影
响应：系统将上架结果反馈给经理

--修改--
刺激：经理输入影片信息
响应：系统检查信息是否符合名称及格式的规范，并提示经理
刺激：经理确认修改电影
响应：系统将修改结果反馈给经理

##### 3.2.1.3 相关功能需求

|||
|--|--|
|Manage.Movie.Authority|在用户进行管理电影前，系统应检查用户是否具有管理电影的身份权限，见Safety2~Safety5|
|Manage.Movie.Authority.Qualify|在用户具有进行管理电影的身份权限时，系统允许用户开始进行管理电影|
|Manage.Movie.Authority.Deny|在用户不具有进行上架电影的身份权限时，系统拒绝用户上架电影|
|||
|Manage.Movie.Input|系统应该允许经理在上架和修改电影任务中进行键盘输入|
|Manage.Movie.Input.Invalid|在经理输入不符合名称和格式规范（见Format1、Format4）的字段或图片链接不符合链接格式时，系统显示输入无效|
|Manage.Movie.Input.Cancel|在经理取消影片信息输入时，系统关闭电影上架或修改任务|
|Manage.Movie.Input.Submit|在经理结束输入触发提交时，系统执行提交任务，见Manage.Movie.Submit|
|||
|Manage.Movie.Submit|系统接受并处理经理提交的要上架或修改电影的信息|
|Manage.Movie.Submit.Release|系统接受并处理经理提交的要上架电影的信息|
|Manage.Movie.Submit.Modify|系统接受并处理经理提交的要修改电影的信息|
|Manage.Movie.Submit.Release.Invalid|若用户提交的电影与影片库中已有的电影或同一提交中的电影重复（重复指影片编码重复，见Format6）或电影信息存缺项、格式错误时，系统提示上架失败|
|Manage.Movie.Submit.Modify.Invalid|若用户提交的修改的电影信息存缺项、格式错误时，系统提示修改失败|
|Manage.Movie.Submit.Modify.Null|在经理未输入任何修改信息就提交时，系统不做任何处理|
|Manage.Movie.Submit.Modify.Approved|检查该电影后续是否有排片，若没有，系统允许该电影被操作|
|Manage.Movie.Submit.Modify.Unapproved|检查该电影后续是否有排片，若有，系统拒绝该电影被操作|
|Manage.Movie.Submit.Success|经理上架或修改电影操作成功后，系统提示成功|
|Manage.Movie.Submit.Update|系统判断提交成功后，执行更新数据任务，见Manage.Movie.Update|
|||
|Manage.Movie.Withdraw|用户选择下架电影，系统更新影片库，见Manage.Movie.Update.Movies|
|Manage.Movie.Withdraw.Unapproved|该电影后续还有排片，系统拒绝下架该电影|
|||
|Manage.Movie.Update|系统更新数据，整个更新过程组成一个事务，要么全部更新，要么全部不更新|

#### 3.2.2 查看电影想看人数

##### 3.2.2.1 特征描述

影院经理和影院员工需要查看电影的想看人数变化趋势。
优先级 = 低

##### 3.2.2.2 刺激/响应序列

刺激：影院经理进入某部电影的想看人数统计界面
响应：系统显示其想看人数变化表
刺激：影院经理点击退出
响应：系统退出当前界面

##### 3.2.2.3 相关功能需求

|||
| -| -|
|Movie.Statistics.Like.Authority|在用户使用查看电影想看人数功能前，系统应检查用户是否具有查看电影想看人数的身份权限，见Safety2~Safety5|
|Movie.Statistics.Like.Authority.Qualify|在用户具有使用查看电影想看人数功能的身份权限时，系统允许用户查看统计信息，见Movie.ViewLike.Single|
|Movie.Statistics.Like.Authority.Deny|在用户不具有使用查看电影想看人数功能的身份权限时，系统拒绝用户查看统计信息|
|||
|Movie.Statistics.Like.Single|当用户选中一部电影时，系统显示该电影的想看人数统计信息界面|

#### 3.2.3 搜索电影

##### 3.2.3.1 特征描述

在想要搜索符合某些条件的影片时，一个已经以观众身份登入系统的用户在搜索框或日期选择框中输入或选择了相应的条件，系统返回符合条件的搜索列表。
优先级 = 低

##### 3.2.3.2 刺激/响应序列

刺激：用户输入关键词，进行搜索
响应：系统显示名称和主演以及介绍中含有关键字的电影列表，每项包括名称，上映日期，主演、电影宣传海报

##### 3.2.3.3 相关功能需求

|||
|-|-|
|Movie.Search.Input|在用户输入关键词搜索时，系统返回名称和主演以及介绍中含有关键字的电影列表，查询项包括名称和电影简介|
|Movie.Search.Input.Null|用户没有输入任何关键词或输入了空的字符串时，系统显示所有电影|

#### 3.2.4 查看电影详情

##### 3.2.4.1 特性描述

当用户顾客在首页或者搜索后看见电影名称时，点击查看电影详情，电影的电影名称、电影简介、演职人员、电影时长、上映日期、剧照及想看人数。
优先级 = 低

##### 3.2.4.2 刺激/响应序列

刺激：用户点击查看电影详情。
响应：系统显示电影的电影名称、电影简介、演职人员、电影时长、上映日期、剧照及想看人数

##### 3.2.4.3 相关功能需求

|||
|  - |  - |
| Movie.Detail.Get | 在用户点击查看电影详情时，系统显示电影详情界面，见UI3.1 |
| Movie.Detail.Get.Unapproved| 若该电影不是观众可见的状态，系统拒绝观众查看该电影详情 |

#### 3.2.5 标记想看电影

##### 3.2.5.1 特性描述

当用户查看电影信息后十分想看该部电影，点击想看，系统将该用户增加至该电影想看记录。
优先级 = 低

##### 3.2.5.2 刺激/响应序列

刺激：用户标记想看。
响应：系统将该用户增加至该电影想看记录，并提示标记成功。
刺激：用户将已标记想看的电影取消标记。
响应：系统将该用户在该电影想看记录中删除，并提示标记取消。

##### 3.2.5.3 相关功能需求

|||
|  - |  - |
| Movie.Like | 用户点击想看，系统将该用户增加至该电影想看记录，并提示标记成功。 |
| Movie.Unlike | 用户确认将已标记想看的电影取消标记，系统将该用户在该电影想看记录中删除，并提示标记取消。 |

#### 3.2.6 用户注册

##### 3.2.6.1 特征描述

当用户第一次使用该系统时需要进行注册，输入用户名和密码，获得和自己互相标识的唯一账户。
优先级 = 高

##### 3.2.6.2 刺激/响应序列

刺激：用户输入注册命令。
响应：系统显示注册界面。
刺激：用户输入用户名和密码并提交。
响应：系统储存用户信息并创建一个用户账户，返回至登录界面。

##### 3.2.6.3 相关功能需求

|||
| -| -|
|Register.Input|系统应该允许用户在注册过程中进行键盘输入|
|Register.Input.Username|用户输入用户名，系统检查用户名是否已存在|
|Register.Input.Password|用户输入密码，系统检查密码格式是否正确（参见Format3）|
|Register.Input.Invalid|用户输入其他无效信息时，系统显示输入无效|
|||
|Register.Submit|用户提交所输入的信息，若输入的信息符合规范（参见Format3），系统为用户创建相应的用户账户保存用户信息，见Register.Update|
|Register.Submit.Invalid|若用户提交的表单信息不完整，系统显示信息不完整|
|Register.Submit.Overlap|若用户填写的用户名与记录中已有的用户名重复，系统提示用户名已被注册|
|||
|Register.Update|系统更新用户的持久化记录|
|||
|Register.End|系统应允许用户在注册过程中退出注册，显示注册的结果|

#### 3.2.7 用户登录

##### 3.2.7.1 特征描述

用户通过用户名和密码校验身份,系统跳转为已登录状态的界面。
优先级 = 高

##### 3.2.7.2 刺激/响应序列

刺激：用户输入用户名和密码。
响应：系统检查并提示用户名和密码是否符合长度和格式的规范。
刺激：用户确认登录。
响应：系统检查用户名和密码是否匹配用户数据，提示登录成功或失败并根据用户身份做相应跳转。

##### 3.2.7.3 相关功能需求

|||
|-|-|
|Login.Input|系统应允许用户在登录处进行键盘输入，发起登录，见Login.Request|
|Login.Input.Invalid|在用户输入的用户名和密码不符合规范（见Format3）时，系统提示输入不符合规范|
|||
|Login.Request|系统处理用户的登陆请求|
|Login.Request.Refuse|在用户处于登录状态时，系统拒绝用户的登陆请求|
|Login.Request.Adopt|在用户未处于登录状态时，系统同意用户的登录请求，进入验证，见Login.Verify|
|||
|Login.Verify|系统处理用户的登录请求，验证登录信息|
|Login.Verify.Failed|在用户提交的用户名和密码无法成功匹配用户数据或不符合规范（见Format3）时，提示用户登录失败的信息|
|Login.Verify.Success|在用户提交的用户名和密码成功匹配用户数据时，提示用户登陆成功的信息并根据用户身份将用户登录进系统，显示对应的界面（见UI1、UI2）|
|Login.Verify.Success.Session|在用户登录成功后，系统保存和用户的会话|

#### 3.2.8 用户登出

##### 3.2.8.1 特征描述

用户退出系统，系统跳转至登录界面。
优先级 = 高

##### 3.2.8.2 刺激/响应序列

刺激：用户请求登出
响应：系统视情况询问确认登出或将用户退出系统
刺激：用户在确认登出过程中取消登出
响应：系统取消将用户登出

##### 3.2.8.3 相关功能需求

|||
|-|-|
|Logout.Request|系统处理用户的登出请求|
|Logout.Request.Confirm|当用户身份为经理、正在进行上架电影操作时，系统要求用户确认登出操作，见Logout.Confirm|
|||
|Logout.Confirm.Cancel|当用户选择取消登出操作时，系统恢复至进入登出状态前的任务|
|Logout.Confirm.Yes|当用户确认登出操作时，系统抛弃用户当前的工作并将用户退出系统，见Logout.End|
|||
|Logout.End|系统处理用户登出的后续任务，将用户引导至未登录的界面|
|Logout.End.Session.Del|系统删除与用户的会话|

#### 3.2.9 管理排片

##### 3.2.9.1 特征描述

影院经理和影院员工在排片界面内对排片进行新增、删除、修改之类的操作。
优先级 = 高

##### 3.2.9.2 刺激/响应序列

刺激：用户请求进行排片管理
响应：系统显示排片管理界面，显示当天默认影厅的所有排片

--增加--
刺激：用户请求增加排片
响应：系统进入排片信息输入界面
刺激：用户提交增加排片信息
响应：系统检查排片信息，进行新增排片，反馈新增排片结果给用户

--修改--
刺激：用户请求修改某排片的信息
响应：系统检查该排片是否在可以修改时间内，进入修改排片信息界面
刺激：用户提交修改排片信息
响应：系统检查排片信息，进行修改排片，反馈修改排片结果给用户

--删除--
刺激：用户请求删除某排片
响应：系统检查该排片是否可删除，进行删除排片，反馈删除排片结果给用户

##### 3.2.9.3 相关功能需求

|||
|-|-|
|Manage.Arrangement|管理员进入排片管理界面，系统做进入排片管理界面前的检查，见Management.Arrangement.Authority|
|Manage.Arrangement.Authority|系统对用户身份和权限进行检查，见Safety2~Safety5|
|~.Authority.Qualify|用户具有管理排片的身份，进入排片管理界面，见UI2.3|
|~.Authority.Deny|用户不具有管理排片的身份，系统拒绝进入排片管理界面|
|Manage.Arrangement.Add|管理排片中的添加排片流程|
|~.Add.Input|系统允许用户在添加排片界面输入排片信息，见Manage.Arrangement.Input|
|~.Add.Input.Submit|用户点击提交按钮，结束输入，见Manage.Arrangement.Add.Submit|
|~.Add.Submit|系统校验用户提交的新增排片信息|
|~.Add.Submit.Null|若用户没有输入任何信息，系统提醒用户没有输入信息，取消这次新增|
|~.Add.Submit.Invalid|若用户提交的排片信息不符合排片数据格式要求（见Format8），系统提示排片信息不符合要求|
|~.Add.Submit.Overlap|若用户提交的排片与系统中已有的排片时间段交错，系统提示排片冲突|
|~.Add.Submit.Valid|用户提交了有效的排片，系统校验通过，完成新增排片，见Manage.Arrangement.Finish|
|Manage.Arrangement.Modify|管理排片中的修改排片流程|
|~.Modify.Input|系统允许用户在修改排片界面输入排片信息，见Manage.Arrangement.Input|
|~.Modify.Input.Submit|用户点击提交按钮，结束输入，见Manage.Arrangement.Modify.Submit|
|~.Modify.Submit|系统校验用户提交的修改排片信息|
|~.Modify.Submit.Null|若用户没有输入任何信息，系统提醒用户没有输入信息，取消这次修改|
|~.Modify.Submit.Invalid|若用户提交的排片信息不符合排片数据格式要求（见Format8），系统提示排片信息不符合要求|
|~.Modify.Submit.Overlap|若用户提交的排片与系统中已有的排片时间段交错，系统提示排片冲突|
|~.Modify.Submit.Valid|用户提交了有效的排片，系统校验通过，完成修改排片，见Manage.Arrangement.Finish|
|Manage.Arrangement.Delete|管理排片中的删除排片流程|
|~.Delete.Submit|用户请求删除某个排片，系统向其确认该次操作|
|~.Delete.Submit.Confirm|用户确认进行删除，系统完成删除排片，见Manage.Arrangement.Finish|
|~.Delete.Submit.Cancel|用户取消删除，系统退出删除流程|
|Manage.Arrangement.Input|系统应允许用户在输入页面中输入相关信息|
|~.Input.Invalid|若用户输入的数据不符合格式规定（见Format1，Format9），系统提示用户输入不符合规定|
|~.Input.Cancel|若用户点击取消按钮，系统关闭输入界面|
|Manage.Arrangement.Finish|系统完成一次排片管理流程|
|~.Finish.Update|持久化本次管理流程操作的排片信息，系统更新排片持久化记录，每次更新都构成一次事务，要么全部更新，要么全部不更新|
|~.Finish.Return|返回给用户本次排片管理操作的结果|

#### 3.2.10 查看排片信息

##### 3.2.10.1 特征描述

用户可以通过选择日期、影厅和电影来查看相符合的排片列表和排片的影片、影厅、放映时间和票价信息。
优先级 = 低

##### 3.2.10.2 刺激/响应序列

刺激：用户输入日期、影厅和电影作为选择条件
响应：系统显示符合条件的排片列表
刺激：用户选择查看某一排片的详细信息
响应：系统显示排片的详细信息

##### 3.2.10.3 相关功能需求

|||
|-|-|
|Arrangement.Search.Input|系统应允许用户在查询排片时输入查询条件|
|~.Input.Null|若用户没有输入查询条件，系统将使用默认条件查询|
|~.Input.Invalid|若用户输入的查询条件不符合格式规范（见Format1，Format4），系统提示查询条件不符合格式，取消查询|
|~.Input.Valid|用户输入了符合规范的查询条件，系统进行查询，显示查询结果，见Arrangement.Search.List|
|Arrangement.Search.List|系统显示根据用户输入的查询条件查询到的排片列表|
|~.List.Null|若没有符合条件的排片，系统显示无符合查询条件的排片|
|Arrangement.Search.Detail|系统显示用户选择查看的排片的详细信息|

#### 3.2.11 排片信息观众可见时间统一管理

##### 3.2.11.1 特征描述

影院员工和管理员可以统一设置一系列排片信息观众可见时间，设置成功后在可见时间之前的排片将对所有观众不可见。
优先级 = 高

##### 3.2.11.2 刺激/响应序列

刺激：用户选择一系列排片，输入排片信息观众可见时间并提交
响应：系统检查输入的时间是否晚于选择排片的开始时间，更新观众可见时间，显示设置结果

##### 3.2.11.3 相关功能需求

|||
|-|-|
|Manage.Arrangement.VisibleTime.Authority|系统对用户身份和权限进行检查，见Safety2~Safety5|
|~.Authority.Qualify|用户具有管理排片可见时间的身份，进入排片管理界面，见UI2.3|
|~.Authority.Deny|用户不具有管理排片可见时间的身份，系统拒绝进入排片管理界面|
||
|Manage.Arrangement.VisibleTime.Input|系统允许用户在设置可见时间时进行键盘和鼠标输入|
|~.Input.Select|用户可以选择要设置可见时间的一系列排片|
|~.Input.Submit|用户提交选择的排片和输入的可见时间，系统进行提交前的最后确认，见Manage.Arrangement.VisibleTime.Submit|
|Manage.Arrangement.VisibleTime.Submit|系统整理并显示用户的输入，请求用户确认|
|~.Submit.SelectNone|若用户没有选择任何排片，系统提示用户没有选择任何排片来设置可见时间|
|~.Submit.Confirm|用户确认进行设置，系统对输入进行检查，见Manage.Arrangement.VisibleTime.Check|
|~.Submit.Cancel|用户取消可见时间的设置，系统回到输入流程，见Manage.Arrangement.VisibleTime.Input|
|Manage.Arrangement.VisibleTime.Check|系统对输入进行检查|
|~.Check.Invalid|用户输入的可见时间不是&geq;0的整数，系统提示输入的可见时间不符合规范，取消设置流程|
|~.Check.LaterThan|用户输入的可见时间晚于选中排片的开始时间，系统提示输入的可见时间晚于排片的开始时间，取消设置流程|
|~.Check.Valid|用户输入了符合规范的，可设置的时间，系统进行设置，见|
|Manage.Arrangement.VisibleTime.Finish|系统完成一次可见时间设置流程|
|~.Finish.Update|持久化本次管理流程操作的排片信息，系统更新排片持久化记录，每次更新都构成一次事务，要么全部更新，要么全部不更新|
|~.Finish.Return|返回给用户本次排片可见时间管理操作的结果|

#### 3.2.12 查看统计数据

##### 3.2.12.1 特征描述

管理员可以查看各项统计数据，包括最受欢迎电影、电影票房、电影排片率、电影上座率和影院客单价。
优先级 = 低

##### 3.2.12.2 刺激/响应序列

刺激：用户为查询最受欢迎电影输入天数，或为查询电影上座率和排片率输入日期，或直接查询电影票房和客单价
响应：系统计算统计数据，显示给查询的用户

##### 3.2.12.3 相关功能需求

|||
|-|-|
|Statistics.Authority|系统对用户身份和权限进行检查，见Safety2~Safety5|
|~.Authority.Qualify|用户具有管理排片可见时间的身份，进入统计界面，见UI2.1|
|~.Authority.Deny|用户不具有管理排片可见时间的身份，系统拒绝进入统计界面|
||
|Statistics.Input|系统允许用户在查询统计数据时进行键盘输入|
|~.Input.Invalid|若用户输入了不符合规范的查询条件（日期晚于当前，或天数&leq;0），系统提示输入不符合规范|
|~.Input.Valid|用户输入了符合规范的查询条件，系统获取统计数据，见Statistics.Query|
|~.Input.None|若用户没有输入任何查询条件，系统使用默认的查询参数进行查询，见Statistics.Query|
|Statistics.Query|系统查询与统计数据有关的持久化数据|
|~.Query.Calculate|系统将查询到的数据计算得到统计数据|
|~.Query.Return|系统将统计数据显示给查询的用户|

#### 3.2.13 优惠活动管理

##### 3.2.13.1 特征描述

管理员可以发布优惠活动。
优先级 = 高

##### 3.2.13.2 刺激/响应序列

刺激：用户请求进行优惠管理
响应：系统显示优惠活动管理界面，显示所有正在进行的优惠活动

--发布--
刺激：用户请求发布优惠活动
响应：系统进入优惠活动信息输入界面
刺激：用户提交增加排片信息
响应：系统检查优惠信息，进行新增优惠活动，反馈发布结果给用户

##### 3.2.13.3 相关功能需求

|||
|-|-|
|Manage.Promotion.Authority|系统对用户身份和权限进行检查，见Safety2~Safety5|
|~.Authority.Qualify|用户具有管理排片可见时间的身份，进入优惠活动管理界面，见UI2.4|
|~.Authority.Deny|用户不具有管理排片可见时间的身份，系统拒绝进入优惠活动管理界面|
||
|Manage.Promotion.Add|用户请求进行发布优惠活动，系统进入输入界面，见Manage.Promotion.Add.Input|
|Manage.Promotion.Add.Input|系统允许用户在发布优惠活动时进行键盘输入|
|~.Add.Input.Invalid|若用户输入的数据不符合格式规定（见Format1），系统提示用户输入不符合规定|
|~.Add.Input.Cancel|若用户点击取消按钮，系统关闭输入界面|
|~.Add.Input.Submit|用户点击提交按钮，结束输入，见Manage.Promotion.Add.Submit|
|~.Add.Submit|系统校验用户提交的新增优惠活动信息|
|~.Add.Submit.Null|若用户没有输入任何信息，系统提醒用户没有输入信息，取消这次新增|
|~.Add.Submit.Invalid|若用户提交的优惠信息不符合优惠活动数据格式要求（见Format？），系统提示优惠活动信息不符合要求|
|~.Add.Submit.Valid|用户提交了有效的优惠活动，系统校验通过，完成新增优惠活动，见Manage.Promotion.Finish|
|Manage.Promotion.Finish|系统完成一次优惠活动管理流程|
|~.Finish.Update|持久化本次管理流程操作的优惠活动信息，系统更新优惠活动持久化记录，每次更新都构成一次事务，要么全部更新，要么全部不更新|
|~.Finish.Return|返回给用户本次优惠活动管理操作的结果|

#### 3.2.14 购买电影票

##### 3.2.14.1 特征描述

观众可以购买电影票，完成锁定座位、订单生成和计算和支付，电影票生成和优惠券获取。
优先级 = 高

##### 3.2.14.2 刺激/响应序列

--选座--
刺激：用户请求开始选座
响应：系统检查用户是否在同一场次有订单，进入选座界面
刺激：用户选定座位锁定
响应：系统检查该座位是否已被锁定，为用户生成订单，锁定座位，进入支付界面

--支付--
刺激：用户选择使用优惠券
响应：系统重新计算订单金额，显示新的订单
刺激：用户选择支付方式，确认支付
响应：系统使用选择的支付方式进行支付，校验支付结果，生成若干电影票，按规则赠送优惠券
刺激：用户取消支付
响应：系统为观众保留这个订单15分钟，等待观众随时返回支付

##### 3.2.14.3 相关功能需求

|||
|-|-|
|Ticket.Seat|观众查看排片的座位分布情况，见UI1.5.1|
|Ticket.Seat.Notify|若观众之前在该排片还有订单未支付，系统询问观众是否保留原订单，若保留则进入Ticket.Order.Pay，否则进入Ticket.Seat.Lock|
|Ticket.Seat.Lock|观众选择了座位，提交锁定座位的请求|
|~.Lock.Null|观众没有选择任何座位，系统不处理锁座请求|
|~.Lock.Fail|观众选择锁定的座位已经被锁定，系统告知观众座位已经被锁定|
|~.Lock.Success|观众锁座成功，系统生成订单，见Ticket.Order.Generate|
|Ticket.Order.Generate|系统根据观众选择锁定的座位生成订单，进入支付流程，见Ticket.Order.Pay|
|Ticket.Order.Coupon|观众使用优惠券支付订单，系统更新订单的实际金额|
|~.Coupon.Invalid|观众使用了不满足使用要求的优惠券，系统提示观众优惠券不能使用|
|Ticket.Order.Pay|观众进入支付订单页面，见UI1.5.2|
|~.Pay.VIPCard|观众使用会员卡支付|
|~.Pay.VIPCard.Success|使用会员卡支付成功，更新会员余额，见Ticket.Order.Pay.Success|
|~.Pay.VIPCard.Leak|会员卡余额不足以支付票，系统提示观众会会员卡余额不足，进入等待流程，见Ticket.Order.Pay.Wait|
|~.Pay.ThirdParty|观众使用第三方支付|
|~.Pay.ThirdParty.Success|第三方支付返回支付成功的结果，见Ticket.Order.Pay.Success|
|~.Pay.ThirdParty.Failed|第三方支付未成功，进入等待流程，见Ticket.Order.Pay.Wait|
|~.Pay.Wait|在订单生成时为观众预留15分钟的支付时间，若支付失败，则继续等待成功的支付，直到15分钟计时结束，见Ticket.Order.Cancel|
|~.Pay.Success|成功支付，更新相关记录，见Ticket.Order.|
|Ticket.Order.Cancel|若观众主动取消或逾时未支付|
|Ticket.Order.Finish|根据订单最终情况更新记录，见Ticket.Order.Update，并返回订单最终结果给观众|
|~.Finish.Return|返回结果给观众|
|Ticket.Order.Update|更新订单记录、电影票记录和优惠券记录|

#### 3.2.15 退票

##### 3.2.15.1 特征描述

当观众要退掉已经购买了的电影票时，点击退票，经系统核实、计算金额后退票退款，在距电影放映时间过近或已出票的情况下不能退票

优先级 = 高

##### 3.2.15.2 刺激/响应序列

刺激：用户点击退票
响应：系统显示退票后返还的金额
刺激：用户点击确认退票
响应：系统显示退票成功

##### 3.2.15.3 相关功能需求

|||
|--|--|
|Ticket.Refund.Strategy|在用户申请退票前，获得相应的退票策略|
|Ticket.Refund.Strategy.Deny|用户申请退票时，退票策略不允许用户退票|
|Ticket.Refund.Strategy.Compute|系统根据退票策略计算用户应获得的退款额|
|||
|Ticket.Refund.VIPCard.Update|退票成功后系统将退款额退回用户的会员卡上|
|||
|Ticket.Refund.TicketList.Update|退票成功后系统把退掉的这张票从用户的电影票列表中删除|

#### 3.2.16 购买会员卡

##### 3.2.16.1 特征描述

当一个没有会员卡的观众想要购买会员卡时，点击购买并查看会员卡特权信息，支付成功后获得会员卡

优先级 = 高

##### 3.2.16.2 刺激/响应序列

刺激：用户点击购买会员卡
响应：系统显示会员卡可享受的权益
刺激：用户点击确认购买
响应：系统生成订单并显示
刺激：用户点击确认订单
响应：系统跳转至第三方支付页面
刺激：用户输入密码，确认支付
响应：系统返回购买结果信息

##### 3.2.16.3 相关功能需求

|||
|--|--|
|VIPCard.Promotion.Show|系统显示会员卡可享受的权益|
|||
|VIPCard.Buy.Order|系统生成订单|
|VIPCard.Buy.Success|在用户支付成功后，系统提示支付成功信息|
|VIPCard.Buy.Update|用户支付成功后，系统执行更新数据任务|

#### 3.2.17 充值会员卡

##### 3.2.17.1 特征描述

当一个已有会员卡的观众想要给自己的会员卡内充值时，选择或输入金额，系统计算优惠后转第三方支付系统完成支付。
优先级 =  高

##### 3.2.17.2 刺激/响应序列

刺激：用户点击会员卡充值
响应：系统显示金额输入/选择页面
刺激：用户选择/输入金额
响应：系统根据充值优惠规则计算本次充值会员卡中增加的余额量
刺激：用户点击确认订单
响应：系统生成订单并显示
刺激：用户点击确认支付
响应：系统返回支付结果信息

##### 3.2.17.3 相关功能需求

|||
|--|--|
|VIPCard.Topup.Strategy|在用户充值前，系统获得可用的会员卡充值优惠信息|
|VIPCard.Topup.Strategy.Compute|系统根据用户选择/输入的金额及优惠信息计算用户本次充值操作可获得的金额|
|||
|VIPCard.Topup.Input|系统应该允许用户在充值任务中进行键盘输入|
|VIPCard.Topup.Input.Choose|系统应该允许用户在几个固定充值金额中选择|
|VIPCard.Topup.Input.Invalid|用户输入不符合规范（不是正整数）|
|VIPCard.Topup.Input.Submit|用户结束输入并提交时，系统触发提交任务|
|||
|VIPCard.Topup.Submit|系统接受并处理用户提交的充值信息|
|VIPCard.Topup.Submit.Null|在用户未输入就提交的情况下，系统不做处理|
|VIPCard.Topup.Submit.Success|用户充值操作成功后，系统返回充值成功的消息|
|VIPCard.Topup.Submit.Update|系统判断提交成功后，执行更新数据任务，更新用户会员卡账号信息|

#### 3.2.18 查看会员卡

##### 3.2.18.1 特征描述

用户应能够查看自己的会员卡信息
优先级 =  低

##### 3.2.18.2 刺激/响应序列

刺激：用户选择查看自己的会员卡信息
响应：系统显示用户的会员卡信息，包括余额

##### 3.2.18.3 相关功能需求

|||
|-|-|
|VIPCard.View.Authority|在用户使用查看会员卡信息功能前，系统应检查用户是否具有使用查看会员卡信息功能的身份权限即用户是否持有会员卡|
|VIPCard.View.Qualify|若用户持有会员卡，系统允许用户查看会员卡信息，见VIPCard.View.Get|
|VIPCard.View.Deny|持有用户不会员卡，系统拒绝用户用户查看会员卡信息|
|||
|VIPCard.View.Get|在用户选择查看会员卡信息时，系统显示用户会员卡信息，包括余额|

#### 3.2.19 查看电影票

##### 3.2.19.1 特征描述

用户应能够查看自己的电影票列表
优先级 =  低

##### 3.2.19.2 刺激/响应序列

刺激：用户选择查看自己的电影票列表
响应：系统显示用户的电影票列表，每张电影票内容包括：电影名、电影开始时间、影厅名称、结束时间、票价、座位号（排号和列号），付款状态 （支付成功和未成功）

##### 3.2.19.3 相关功能需求

|||
|-|-|
|Ticket.View|在用户选择查看电影票时，系统显示用户的电影票列表，每张电影票内容包括：电影名、电影开始时间、影厅名称、结束时间、票价、座位号（排号和列号），付款状态 （支付成功和未成功）|

#### 3.2.20 会员卡充值策略管理

##### 3.2.20.1 特征描述

当一个已经以影院经理身份登陆的用户想要修改会员卡充值优惠策略时，点击修改，经提交完成修改。

优先级 =  低

##### 3.2.20.2 刺激/响应序列

--发布--
刺激：用户点击增加一条策略
响应：系统弹出输入框
刺激：用户输入满额和优惠额
响应：系统检查输入是否符合规范，并提示用户

--修改--
刺激：用户点击修改一条策略
响应：系统弹出输入框
刺激：用户输入满额和优惠额
响应：系统检查输入是否符合规范，并提示用户

--删除--
刺激：用户删除一条策略
响应：系统删除策略并反馈结果
刺激：用户点击增加策略
响应：系统弹出输入框

##### 3.2.20.3 相关功能需求

|||
|--|--|
|Manage.VIPCard.Reduction.Authority|在用户进行会员卡策略管理前，系统应检查用户是否具有发布会员卡策略的身份权限，见Safety~Safety5|
|~.Authority.Qualify|在用户具有进行会员卡策略管理的身份权限时，系统允许用户开始进行发布会员卡策略的操作|
|~.Authority.Deny|在用户不具有进行会员卡策略管理的身份权限时，系统禁止用户开始进行发布会员卡策略的操作|
|||
|Manage.VIPCard.Reduction.Release|用户进行充值优惠策略的发布，进行输入，见Manage.VIPCard.Reduction.Input|
|Manage.VIPCard.Reduction.Modify|用户进行充值优惠策略的修改，进行输入，见Manage.VIPCard.Reduction.Input|
|Manage.VIPCard.Reduction.Remove|用户删除充值优惠策略，若删除成功见Manage.VIPCard.Reduction.Update；若删除失败，系统提示删除失败|
|||
|Manage.VIPCard.Reduction.Input|系统应该允许经理在发布或修改会员卡优惠策略任务中进行输入|
|~.Input.Invalid|在经理输入不符合规范（目标金额不是正整数或优惠金额不是正数）时，系统显示输入无效|
|~.Input.Cancel|在经理取消优惠策略信息输入时，系统关闭优惠策略发布或修改|
|~.Input.Submit|在经理结束输入触发提交时，系统执行提交任务|
|||
|Manage.VIPCard.Reduction.Submit|系统接受并处理经理提交的会员卡优惠策略的信息|
|~.Submit.Invalid|当经理提交的优惠策略输入格式不符合规范（输入的目标金额不是正整数，或优惠金额不是正数，或输入不完整）时，系统提示发布或修改失败的消息|
|~.Submit.Null|在经理未输入任何信息就提交时，系统不做任何处理|
|~.Submit.Success|经理发布会员卡优惠策略操作成功后，系统返回发布成功的消息，并更新持久化记录，见Manage.VIPCard.Reduction.Update|
|Manage.VIPCard.Reduction.Update|系统判断提交成功后，执行更新数据任务|

#### 3.2.21 退票策略管理

##### 3.2.21.1 特征描述

一个已经以影院经理身份登陆的用户想要对退票策略增删改查。

优先级 =  高

##### 3.2.21.2 刺激/响应序列

--添加--
刺激：用户点击添加退票策略
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--修改--
刺激：用户点击修改退票策略
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--删除--
刺激：用户选择删除退票策略
响应：系统返回处理结果

--查看--
刺激：用户选择查看退票策略
响应：系统返回所有的退票策略

##### 3.2.21.3 相关功能需求

| | |
|  - |  - |
| Manage.Refund.Strategy.Authority | 在用户进行退票策略管理前，系统应检查用户是否具有发布退票策略的身份权限，见Safety~Safety5 |
| ~.Authority.Qualify | 在用户具有进行退票策略管理的身份权限时，系统允许用户开始进行发布退票策略的操作 |
| ~.Authority.Deny | 在用户不具有进行退票策略管理的身份权限时，系统禁止用户开始进行发布退票策略的操作 |
| | |
| Manage.Refund.Strategy.Release|用户进行退票策略的发布，进行输入，见Manage.Refund.Strategy.Input|
| Manage.Refund.Strategy.Modify|用户进行退票策略的修改，进行输入，见Manage.Refund.Strategy.Input|
| Manage.Refund.Strategy.Input | 系统应该允许经理在发布退票策略任务中进行输入 |
| ~.Input.Invalid | 在经理输入不符合规范时，系统显示输入无效 |
| ~.Input.Cancel | 在经理取消退票策略信息输入时，系统关闭退票策略发布任务 |
| ~.Input.Submit | 在经理结束输入触发提交时，系统执行提交任务 |
| | |
| Manage.Refund.Strategy.Submit | 系统接受并处理经理提交的退票策略的信息 |
| ~.Submit.Invalid | 当经理提交的退票策略输入格式不符合规范时，系统提示发布失败的消息 |
| ~.Submit.Null | 在经理未输入任何信息就提交时，系统不做任何处理 |
| ~.Submit.Success | 经理发布退票策略操作成功后，系统返回发布成功的消息 |
| | |
| Manage.Refund.Strategy.Get | 系统显示所有的退票策略 |
| Manage.Refund.Strategy.Delete.Confirm | 经理确认删除该退票策略，系统将其删除，删除成功见Manage.Refund.Strategy.Update，删除失败系统提示用户删除失败 |
| Manage.Refund.Strategy.Delete.Cancel | 经理取消删除退票策略，系统关闭该行为 |
|||
| Manage.Refund.Strategy.Update | 系统执行更新数据任务 |

#### 3.2.22 影厅信息管理

##### 3.2.22.1 特征描述

一个已经以影院经理身份登陆的用户想要对影厅信息进行增改查。

优先级 =  高

##### 3.2.22.2 刺激/响应序列

--添加--
刺激：用户点击添加影厅信息
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--修改--
刺激：用户点击修改影厅信息
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--查看--
刺激：用户选择查看影厅信息
响应：系统返回所有的影厅信息

##### 3.2.22.3 相关功能需求

| | |
|  - |  - |
| Manage.Hall.Authority | 在用户进行管理影厅信息前，系统应检查用户是否具有管理影厅信息的身份权限，见Safety~Safety5 |
| ~.Authority.Qualify | 在用户具有进行管理影厅信息的身份权限时，系统允许用户开始进行管理影厅信息的操作 |
| ~.Authority.Deny | 在用户不具有进行管理影厅信息的身份权限时，系统禁止用户开始进行管理影厅信息的操作 |
| | |
| Manage.Hall.Add |用户进行影厅的添加，进行输入，见Manage.Hall.Input|
| Manage.Hall.Modify |用户进行影厅信息的修改，进行输入，见Manage.Hall.Input |
| Manage.Hall.Input | 系统应该允许经理在添加或修改影厅信息任务中进行输入 |
| ~.Input.Invalid | 在经理输入不符合规范时，系统显示输入无效 |
| ~.Input.Cancel | 在经理取消影厅信息输入时，系统关闭添加影厅信息任务 |
| ~.Input.Submit | 在经理结束输入触发提交时，系统执行提交任务，见Manage.Hall.Submit |
| | |
| Manage.Hall.Submit | 系统接受并处理经理提交的影厅信息 |
| ~.Submit.Invalid | 当经理提交的影厅信息输入格式不符合规范时，系统提示发布失败的消息 |
| ~.Submit.Null | 在经理未输入任何信息就提交时，系统不做任何处理 |
| ~.Submit.Success | 经理添加影厅信息操作成功后，系统更新数据，见manage.Hall.Update；并返回发布成功的消息 |
| Manage.Hall.Update | 系统判断提交成功后，执行更新数据任务 |
| | |
| Manage.Hall.Get | 系统显示所有的影厅信息 |

#### 3.2.23 调整用户

##### 3.2.23.1 特征描述

一个已经以影院经理身份登陆的用户想要对影院员工增删改查。

优先级 =  高

##### 3.2.23.2 刺激/响应序列

--添加--
刺激：用户点击添加影院员工
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--修改--
刺激：用户点击修改影院员工信息
响应：系统弹出输入框
刺激：用户确认输入
响应：系统返回处理结果

--删除--
刺激：用户选择删除影院员工
响应：系统返回处理结果

--查看--
刺激：用户选择查看影院员工
响应：系统返回所有的影院员工

##### 3.2.23.3 相关功能需求

| | |
|  - |  - |
| Manage.Staff.Authority | 在用户进行调整用户前，系统应检查用户是否具有调整用户的身份权限，见Safety~Safety5 |
| ~.Authority.Qualify | 在用户具有进行调整用户的身份权限时，系统允许用户开始进行调整用户的操作 |
| ~.Authority.Deny | 在用户不具有进行调整用户的身份权限时，系统禁止用户开始进行调整用户的操作 |
| | |
|Manage.Staff.Add|用户添加新员工账户，进行输入，见Manage.Staff.Input|
|Manage.Staff.Modify|用户修改员工账户，进行输入，见Manage.Staff.Input|
|Manage.Staff.Remove|用户删除员工账户，若删除成功见Manage.Staff.Update；若删除失败，系统提示删除失败|
|||
| Manage.Staff.Input | 系统应该允许经理在添加或修改影院员工账户信息任务中进行输入 |
| ~.Input.Invalid | 在经理输入不符合规范时，系统显示输入无效 |
| ~.Input.Cancel | 在经理取消影院员工信息输入时，系统关闭添加影院员工任务 |
| ~.Input.Submit | 在经理结束输入触发提交时，系统执行提交任务 |
| | |
| Manage.Staff.Submit | 系统接受并处理经理提交的影院员工的信息 |
| ~.Submit.Invalid | 当经理提交的影院员工信息输入格式不符合规范时，系统提示发布失败的消息 |
| ~.Submit.Null | 在经理未输入任何信息就提交时，系统不做任何处理 |
| ~.Submit.Success | 经理添加影院员工操作成功后，系统更新数据，见Manage.Staff.Update；并返回发布成功的消息 |
| Manage.Staff.Update | 系统执行更新数据任务 |
| | |
| Manage.Staff.Get | 系统显示所有的影院员工 |
| Manage.Staff.Delete | 经理发起删除某一个影院员工的行为 |
| ~.Delete.Confirm | 经理确认删除该影院员工，系统将其删除，删除成功见Manage.Staff.Update；删除失败，系统提示用户删除失败 |
| ~.Delete.Cancel | 经理取消删除影院员工，系统关闭该行为 |

#### 3.2.24 查看会员卡流水记录

##### 3.2.24.1 特征描述

观众能够查看自己的会员卡流水记录
优先级 =  低

##### 3.2.24.2 刺激/响应序列

刺激：观众选择查看自己的会员卡流水记录
响应：系统显示观众的会员卡流水记录列表，每一项包括时间，收支金额
刺激：观众选择一项流水记录查看详情
响应：系统显示该项流水记录的详情

##### 3.2.24.3 相关功能需求

|||
|-|-|
|VIPCard.Trade.History.Authority|在用户使用查看流水记录功能前，系统应检查用户是否具有使用查看流水记录功能的身份权限，即用户是否持有会员卡|
|~.Authority.Qualify|若用户持有会员卡，系统允许用户查看流水记录，见VIPCard.Trade.History.Get|
|~.Authority.Deny|持有用户不会员卡，系统拒绝用户用户查看流水记录|
|||
|VIPCard.Trade.History.Get|在用户选择查看流水记录时，系统显示用户的流水记录记录列表，每一项包括时间，收支金额|
|||
|VIPCard.Trade.History.Single|系统应允许用户选择一项流水记录记录查看详情，见VIPCard.Trade.History.Detail|
|||
|VIPCard.Trade.History.Detail|在用户选择某一项流水记录时，系统返回该流水记录的详情，包括时间，收支金额，交易前会员卡余额，交易后会员卡余额|

#### 3.2.25 查看历史消费记录

##### 3.2.25.1 特征描述

观众应能够查看自己的历史消费记录
优先级 =  低

##### 3.2.25.2 刺激/响应序列

刺激：观众选择查看自己的历史消费记录
响应：系统显示观众的历史消费记录订单列表，每一项包括时间，消费金额，购买的电影票详情信息
刺激：观众选择一项历史消费记录查看详情
响应：系统显示该项历史消费记录的详情

##### 3.2.25.3 相关功能需求

|||
|--|--|
|Order.History.get|在用户选择查看历史消费记录时，系统显示用户的历史消费记录列表，每一项包括消费时间，消费金额|
|||
|Order.History.Single|系统应允许用户选择一项历史消费记录查看消费详情，见Audience.HistoricalConsumption.Detail|
|||
|Order.History.Detail|在用户选择某一项历史消费记录时，系统返回该消费记录的详情，包括消费时间，消费金额，以及购买的相应电影票详情|

#### 3.2.26 赠送优惠券给会员

##### 3.2.26.1 特征描述

一个已经以影院经理身份登陆的用户想要对达到某一消费额度的会员赠送优惠券。

优先级 =  高

##### 3.2.26.2 刺激/响应序列

刺激：经理输入某一金额
响应：系统返回消费达到该金额的会员列表
刺激：经理选择一到多个优惠活动
响应：系统将优惠券赠送给会员

##### 3.2.26.3 相关功能需求

| | |
|  - |  - |
| Manage.Promotion.Present.Authority | 在用户进行赠送优惠券前，系统应检查用户是否具有赠送优惠券的身份权限 |
| ~.Authority.Qualify | 在用户具有进行赠送优惠券的身份权限时，系统允许用户开始进行赠送优惠券的操作 |
| ~.Authority.Deny | 在用户不具有进行赠送优惠券的身份权限时，系统禁止用户开始进行赠送优惠券的操作 |
| | |
| Manage.Promotion.Present.Input | 系统应该允许经理在搜索达到指定金额的会员中进行输入 |
| ~.Input.Invalid | 在经理输入不符合规范时，系统显示输入无效 |
| ~.Input.Cancel | 在经理取消搜索达到指定金额的会员时，系统关闭赠送优惠券任务 |
| ~.Input.Submit | 在经理结束输入触发提交时，系统执行提交任务 |
| | |
| Manage.Promotion.Present.Submit | 系统接受并处理经理提交的金额 |
| ~.Submit.Invalid | 当经理提交的金额输入格式不符合规范时，系统提示寻找失败的消息 |
| ~.Submit.Null | 在经理未输入金额就提交时，系统不做任何处理 |
| ~.Submit.Success | 经理输入金额操作成功后，系统返回所有符合条件的会员列表和优惠活动 |
| | |
| Manage.Promotion.Present.Choose | 经理选择要赠送优惠券的优惠活动和要赠送的对象用户 |
| ~.Coupon.Null | 当无可用优惠活动或无符合条件的用户时，系统提示无可用优惠活动消息或无目标用户 |
| Manage.Promotion.Present.Submit | 经理提交选择的优惠活动，系统将该优惠券添加给指定会员，见Manage.Promotion.Present.Update |
|||
|Manage.Promotion.Present.Update|系统更新用户的优惠券数据|

### 3.3 非功能需求

#### 3.3.1 安全性

Safety1:系统应该只允许经过验证和授权的用户访问。
Safety2:系统应该按照用户账户验证用户的操作权限。
Safety3:具有总经理(root)身份的用户可以管理电影、排片、影厅、充值优惠策略、退票策略、优惠活动和影院员工，可以查看统计数据，可以为观众赠送优惠券。
Safety4:具有一般经理(manager)身份的用户可以管理电影、排片、影厅、充值优惠策略、退票策略和优惠活动，可以查看统计数据，可以为观众赠送优惠券。
Safety5:具有员工(staff)身份的用户可以管理电影、排片和优惠活动。

#### 3.3.2 可维护性

Modifiability1：在系统的电影数据格式（见Format4、Format5、Format6）发生变化时，系统要能够在一个经理半天内完成。

#### 3.3.3 易用性

Usability1：网站页面间跳转要尽可能流畅。
Usability2：用户能在1小时内掌握自己有权限进行的各种相关操作。

#### 3.3.4 可靠性

Reliability1：系统应保证24小时不间断运行，系统硬件构成应具有冗余等安全措施。
Reliability2：系统平均无故障时间和平均故障间隔时间长，平均故障修复时间短。
Reliability2.1：平均故障时间间隔应不低于5000h，故障平均修复时间不高于1h，每年系统故障率不超过2%。
Reliability3：系统具有避免单点失效的功能，从而保证系统的可靠度不低于99.99%。
Reliability4：在客户端与服务器通信时，如果网络故障，系统不能出现故障。
Reliability4.1：客户端应该检测到故障，并尝试重新连接网络3次，每次15秒。
Reliability4.1.1：重新连接后，客户端应该继续之前的工作。
Reliability4.1.2：如果重新连接不成功，客户端应该等待5分钟后再次尝试重新连接。
Reliability4.1.2.1：重新连接后，客户端应该继续之前的工作。
Reliability4.1.2.2：如果重新连接仍然不成功，客户端报警。

#### 3.3.5 业务规则

BR1：电影上架规则。
（电影上映日期 >= 上架日期）
BR2：电影票退票规则
（退票额度 = 观众购买实际票价 * 根据天数累进的返还百分比）

#### 3.3.6 约束

IC1：系统在网络上分布为一个服务器和许多基于浏览器的网页访问

### 3.4 数据需求

#### 3.4.1 数据定义

DR1：系统需要存储20年内的电影数据。
DR2：系统需要存储10万会员的用户数据。
DR3：系统删除后的电影数据和用户数据仍然要继续存储1个月的时间，以保证历史数据显示的正确性。

#### 3.4.2 默认数据

默认数据用于以下两种情况：

- 系统新增加数据时。
- 编辑数据时不小心将相关内容清空时。

Default1：电影想看人数默认为0。
Default2：注册时默认用户身份为观众。

#### 3.4.3 数据格式要求

Format1：日期的格式必须是yyyy-mm-dd，时间范围为1970年1月1日至2038年1月19日。
Format2：人数的格式必须是自然数。
Format3：用户（观众，经理）的用户名和密码只能包含数字，字母，长度应为6-16位。
Format4：电影名称和详情必须是UTF-8编码字符组成的文本。
Format5：电影详情中使用的图片文件格式必须为jpg、jpeg或png格式中的一种，且大小不超过1MB。
Format6：电影的唯一标识为国家广电总局规定的12位影片编码。
Format7：一部电影必须的信息为电影的影片编码、电影名称、电影简介、演职人员、电影时长、上映日期、剧照及想看人数。
Format8: 一个排片必须的信息为播放电影、影厅、开始时间、结束时间、票价、观众可见时间。
Format9: 电影票价为&gt;0的小数

### 3.5 其他需求

安装需求：
Install1：系统投入使用时，需要向影院内部用户发放使用手册和系统文档。
Install2：在部署系统时，要初始化用户、影片库等重要数据。
语言需求：
Language1：系统只对中文有完全的语言支持。
